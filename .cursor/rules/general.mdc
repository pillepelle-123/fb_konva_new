---
description: "Projekt-Architektur und technische Regeln für fb-konva-fullstack"
alwaysApply: false
globs: ["**/*.{ts,tsx,js,json,md}"]
---

## Projekt-Architektur
- **Full-Stack-Struktur**: Client (React/TypeScript) ↔ Server (Node.js) ↔ PostgreSQL
- **Canvas-System**: Konva.js für interaktive Editor-Funktionalität
- **PDF-Export**: Separater Renderer für hochwertige PDF-Generierung
- **Datenbank**: PostgreSQL mit Migrations-System

## Datei-Organisation
- **Client**: `src/components/`, `src/utils/`, `src/hooks/`, `src/services/`
- **Server**: `routes/`, `services/`, `utils/`, `migrations/`
- **Dokumentation**: `docs/` mit klarer Struktur (features/, implementation/, testing/)
- **Konfiguration**: `.cursorignore` für Performance-Optimierung

## Spezielle Regeln
- **Canvas-Editor**: Komplexe State-Management mit React Context
- **PDF-Renderer**: Separater Build-Prozess für optimale Performance
- **Background Images**: Effiziente Lade- und Cache-Strategien
- **Real-time Collaboration**: Optimistische Updates mit Conflict Resolution
- **Migration statt Backward Kompatibilität**: Bei Lösungsänderungen werden bestehende Artefakte (z.B. Datenbank-Einträge) durch Migrations angepasst, anstatt Backward Kompatibilität zu wahren